$(document).ready(function(){cont=0;showMsg("Realice las operaciones necesarias con Las Reservas<br />Y PRESIONE GRABAR para Guardar los CAMBIOS","highlight-alert",false);$.datepicker.setDefaults($.datepicker.regional.es);$("#btnAddReserva").hover(function(){$(this).addClass("ui-state-hover")},function(){$(this).removeClass("ui-state-hover")}).click(function(b){$("#frmDisponibilidad").submit();b.preventDefault()});$("#reservasGuardadas").fadeIn("slow").load("./propiedadDisp.php?acc=ls",function(){$(".delButton").hover(function(){$(this).addClass("ui-state-hover")},
function(){$(this).removeClass("ui-state-hover")}).live("click",function(){$($(this).closest("tr")).fadeOut(function(){$(this).remove()});$.get($(this).attr("href"),function(b){$("#reservasGuardadas").empty().html(b);cont++});return false})});$("#frmDisponibilidad").validate({submitHandler:function(b){$.ajax({type:"POST",url:$(b).attr("action"),data:$(b).serialize(),success:function(a){$("#reservasGuardadas").empty().html(a);$(".delButton","#reservasGuardadas").hover(function(){$(this).addClass("ui-state-hover")},
function(){$(this).removeClass("ui-state-hover")});if(a.indexOf("<li>")==-1){cont++;$(":input","#frmDisponibilidad").not(":button, :submit, :reset, :hidden").val("").removeClass("error")}},error:function(a,c){showMsg(c+": "+a.responseText,"error-alert",true)}});$("#jGrowl").children().trigger("jGrowl.close");$("#aReservaDesde, #aReservaHasta").datepicker("option",{minDate:null,maxDate:null})},onfocusout:false,focusInvalid:false,onkeyup:false,focusCleanup:true,showErrors:function(b,a){var c=$("<ul>").css({margin:"0px",
padding:"5px"});$.each(a,function(e,d){if(d.message!=""){$(d.element).addClass("error");$("<li>").text(d.message).appendTo(c)}});if(c.children().length>0){$("#jGrowl").children().trigger("jGrowl.close");showMsg(c.html(),"error-alert",true)}},rules:{aReservaDesde:{required:true},aReservaHasta:{required:true}},messages:{aReservaDesde:{required:"La Fecha Desde para la Reserva es Requerida"},aReservaHasta:{required:"La Fecha Hasta para la Reserva es Requerida"}}});$("#aReservaDesde, #aReservaHasta").datepicker({showOn:"both",
beforeShow:customPickRules,buttonImage:"../../css/images/calendar/calendar.png",buttonImageOnly:true,changeMonth:true,changeYear:true,showAnim:"show",buttonText:"Seleccione Fecha"});$("input:text").focus(function(){$(this).val("").css({backgroundColor:"#FFFFF4"})}).blur(function(){$(this).css({backgroundColor:""})})});
function customPickRules(b){var a=null,c=null;if(b.id=="aReservaDesde"){if($("#aReservaHasta").datepicker("getDate")!=null){c=$("#aReservaHasta").datepicker("getDate");c.setDate(c.getDate()-1)}}else if(b.id=="aReservaHasta")if($("#aReservaDesde").datepicker("getDate")!=null){a=$("#aReservaDesde").datepicker("getDate");a.setDate(a.getDate()+1)}return{minDate:a,maxDate:c}};